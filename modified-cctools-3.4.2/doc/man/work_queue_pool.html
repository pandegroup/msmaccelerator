














<html><head><title>work_queue_pool(1)</title></head><body><h1>work_queue_pool(1)</h1>
<h2>NAME</h2>
<b>work_queue_pool</b> - submit a pool of Work Queue workers on various batch systems.

<h2>SYNOPSIS</h2>
<tt><b>work_queue_pool [options] <i>&lt;hostname&gt;</i> <i>&lt;port&gt;</i> <i>&lt;number&gt;</i></b></tt>
<p>
or
<p>
<tt><b>work_queue_pool [options] -a <i>&lt;num-workers&gt;</i></b></tt>

<h2>DESCRIPTION</h2>
<b>work_queue_pool</b> submits and maintains a number 
of <a href=work_queue_worker.html>work_queue_worker(1)</a> processes on various batch systems, such as
Condor and SGE.  Each <b>work_queue_worker</b> process represents a Work Queue
worker.  All the Work Queue workers managed by a <b>work_queue_pool</b> process
can be pointed to a specific Work Queue master, or be instructed to find their
preferred masters through a catalog server. 
<p>
If the <b><i>&lt;hostname&gt;</i></b> and <b><i>&lt;port&gt;</i></b> arguments are provided, the
workers maintained by the <b>work_queue_pool</b> process would only work for the
master running at <b><i>&lt;hostname&gt;</i>:<i>&lt;port&gt;</i></b>. If the <b><tt>-a</tt></b>
option is present, then the <b><i>&lt;hostname&gt;</i></b> and <b><i>&lt;port&gt;</i></b>
arguments are not needed and the workers would contact a catalog server to find
out the appropriate masters (see the <b><tt>-N</tt></b> option). In either case,
the <b><i>&lt;number&gt;</i></b> argument specifies the number of workers that
<b>work_queue_pool</b> should maintain.  
<p>
If a <b>work_queue_worker</b> process managed by the <b>work_queue_pool</b> is
shutdown (i.e. failure, eviction, etc.), then the <b>work_queue_pool</b> will
re-submit a new <b>work_queue_worker</b> to the specified batch system
<b><i>&lt;type&gt;</i></b> in order to maintain a constant <b><i>&lt;number&gt;</i></b> of
<b>work_queue_worker</b> processes.

<h2>OPTIONS</h2>

<h3>Batch Options</h3>
<table>
<tr><td colspan=2> <b><tt>-d <i>&lt;subsystem&gt;</i></tt></b><tr><td><td>Enable debugging for this subsystem.
<tr><td colspan=2> <b><tt>-S <i>&lt;scratch&gt;</i></tt></b><tr><td><td>Scratch directory. (default is /tmp/${USER}-workers)
<tr><td colspan=2> <b><tt>-T <i>&lt;type&gt;</i></tt></b><tr><td><td>Batch system type: unix, condor, sge, workqueue, xgrid. (default is unix)
<tr><td colspan=2> <b><tt>-r <i>&lt;count&gt;</i></tt></b><tr><td><td>Number of attemps to retry if failed to submit a worker.
<tr><td colspan=2> <b><tt>-W <i>&lt;path&gt;</i></tt></b><tr><td><td>Path to the <a href=work_queue_worker.html>work_queue_worker(1)</a> executable.
<tr><td> <b><tt>-h</tt></b> <td>Show this screen.
</table>

<h3>Worker Options</h3>
<table>
<tr><td> <b><tt>-a</tt></b> <td>Enable auto mode. In this mode the workers would ask a catalog server for available masters.
<tr><td colspan=2> <b><tt>-t <i>&lt;time&gt;</i></tt></b><tr><td><td>Abort after this amount of idle time.
<tr><td colspan=2> <b><tt>-C <i>&lt;catalog&gt;</i></tt></b><tr><td><td>Set catalog server to <i>&lt;catalog&gt;</i>. Format: HOSTNAME:PORT 
<tr><td colspan=2> <b><tt>-N <i>&lt;project&gt;</i></tt></b><tr><td><td>Name of a preferred project. A worker can have multiple preferred projects.
<tr><td> <b><tt>-s</tt></b> <td>Run as a shared worker. By default the workers would only work for preferred projects.
<tr><td colspan=2> <b><tt>-o <i>&lt;file&gt;</i></tt></b><tr><td><td>Send debugging to this file.
</table>

<h2>EXIT STATUS</h2>
On success, returns zero. On failure, returns non-zero.

<h2>EXAMPLES</h2>
<h3>Example 1</h3>
Suppose you have a Work Queue master running on <tt>barney.nd.edu</tt> and it is
listening on port <tt>9123</tt>. To start 10 workers on the Condor batch system
for your master, you can invoke <b>work_queue_pool</b> like this: 

<pre>
work_queue_pool -T condor barney.nd.edu 9123 10
</pre>

If you want to start the 10 workers on the SGE batch system instead, you only
need to change the <b><tt>-T</tt></b> option:

<pre>
work_queue_pool -T sge barney.nd.edu 9123 10
</pre>

If you have access to both of the Condor and SGE systems, you can run both of
the above commands and you will then get 20 workers for your master.

<h3>Example 2</h3>
Suppose you have started a Work Queue master with <a href=makeflow.html>makeflow(1)</a> like this:

<pre>
makeflow -T wq -a -N myproject makeflow.script
</pre>

The <b><tt>-N</tt></b> option given to <b>makeflow</b> specifies the project name for the
Work Queue master. The master's information, such as <tt>hostname</tt> and
<tt>port</tt>, will be reported to a catalog server. The <b>work_queue_pool</b>
program can start workers that prefer to work for this master by specifying the
same project name on the command line (see the <b><tt>-N</tt></b> option):

<pre>
work_queue_pool -T condor -N my_project -a 10
</pre>

<h2>COPYRIGHT</h2>
The Cooperative Computing Tools are Copyright (C) 2003-2004 Douglas Thain and Copyright (C) 2005-2011 The University of Notre Dame.  This software is distributed under the GNU General Public License.  See the file COPYING for details.

<h2>SEE ALSO</h2>

<dir>
<li> <a href="../index.html">Cooperative Computing Tools Documentation</a>
<li> <a href="../workqueue.html">Work Queue User Manual</a>
<li> <a href=work_queue_worker.html>work_queue_worker(1)</a>
<li> <a href=work_queue_status.html>work_queue_status(1)</a>
<li> <a href=work_queue_pool.html>work_queue_pool(1)</a>
<li> <a href=condor_submit_workers.html>condor_submit_workers(1)</a>
<li> <a href=sge_submit_workers.html>sge_submit_workers(1)</a>
<li> <a href=ec2_submit_workers.html>ec2_submit_workers(1)</a>
<li> <a href=ec2_remove_workers.html>ec2_remove_workers(1)</a>
</dir>

<p><hr>CCTools 3.4.2 released on 02/10/2012</body></html>

