














<html><head><title>starch(1)</title></head><body><h1>starch(1)</h1>

<h2>NAME</h2>
<b>starch</b> - STandalone application ARCHiver

<h2>SYNOPSIS</h2>
<tt><b>starch [options] <i>&lt;sfx_path&gt;</i></b></tt>

<h2>DESCRIPTION</h2>

<b>Starch</b> is a script that creates standalone application archives in the
form of self-extracting executables (<tt>SFX</tt>). Users may specify the command,
executables, libraries, data, and environment scripts associated with the
application by specifying the appropriate command line options or by using a
configuration file.  <b>starch</b> is particularly useful for distributed
computing, in that it makes an executable portable across different
operating system variants.

<h2>OPTIONS</h2>

To great a <tt>SFX</tt>, simply specify the name of the <tt>SFX</tt> to create along
with the <i>&lt;command&gt;</i> to execute and any other dependencies such as
<i>&lt;executables&gt;</i>, <i>&lt;libraries&gt;</i>, <i>&lt;data&gt;</i>, or <i>&lt;environment&gt;</i>
scripts.
<p>
If a <i>&lt;command&gt;</i> is specified, but no <i>&lt;executable&gt;</i> is passed, then the
first token in the <i>&lt;command&gt;</i> will be used as the executable.
<p>
By default, <tt>starch</tt> will use <tt>ldd</tt> to detect any necessary libraries
from the specified set of <i>&lt;executables&gt;</i> and include them in the <tt>SFX</tt>. 
<table>
<tr><td> <b><tt>-A</tt></b> <td>Do not automatically detect library dependencies.
<tr><td colspan=2> <b><tt>-C <i>&lt;cfg&gt;</i></tt></b><tr><td><td>Use configuration file.
<tr><td colspan=2> <b><tt>-c <i>&lt;cmd&gt;</i></tt></b><tr><td><td>Specify command to execute.
<tr><td colspan=2> <b><tt>-d <i>&lt;npath:opath&gt;</i></tt></b><tr><td><td>Add data (new path:old path).
<tr><td colspan=2> <b><tt>-e <i>&lt;env&gt;</i></tt></b><tr><td><td>Add environment script.
<tr><td colspan=2> <b><tt>-l <i>&lt;lib&gt;</i></tt></b><tr><td><td>Add library.
<tr><td colspan=2> <b><tt>-x <i>&lt;exe&gt;</i></tt></b><tr><td><td>Add executable.
<tr><td> <b><tt>-h</tt></b> <td>Show help message and exit.
<tr><td> <b><tt>-v</tt></b> <td>Display verbose messages (default: False).
</table>
Once a <tt>SFX</tt> is generated, you can use it as a normal executable.

<h2>CONFIGURATION FILE</h2>
The command line options may be stored in a configuration file and passed to
starch using the <tt>-C</tt> option.  The format of the configuration file is as
follows:
<pre>
[starch]
executables = echo date hostname
libraries   = libz.so
data        = hosts.txt:/etc/hosts localtime:/etc/localtime images:/usr/share/pixmaps
command     = echo $(hostname) $(date $@)
</pre>

<h2>ENVIRONMENT VARIABLES</h2>

The following environment variables will affect the execution of the <tt>SFX</tt>
generated by <tt>starch</tt>:

<h3>SFX_DIR</h3>
Determines the target directory where the <tt>SFX</tt> will be extracted.  By
default this is <tt>/tmp/$hostname.$user.$basename.dir</tt>.

<h3>SFX_EXTRACT_ONLY</h3>
Only extract the <tt>SFX</tt>.  By default it is extracted and executed.

<h3>SFX_EXTRACT_FORCE</h3>
Extract the <tt>SFX</tt> even if the <tt>SFX_DIR</tt> exists. This is disabled by
default to as an optimization to avoid unnecessarily extracting.

<h3>SFX_KEEP</h3>
Keep extracted files.  By default the files will be removed after execution.

<h3>SFX_UNIQUE</h3>

Use <tt>mktempd</tt> to generate a unique <tt>SFX_DIR</tt> target directory. This
will prevent <tt>SFX_KEEP</tt> from working properly since the names will change
in between invocations.

<h2>EXIT STATUS</h2>
On success, returns zero.  On failure, returns non-zero.

<h2>EXAMPLES</h2>

Package the data program:
<pre>
    $ starch -x date date.sfx
</pre>
   
Package the date program using a configuration file:
<pre>
    $ cat data.cfg
    [starch]
    command = date
    $ starch -C date.cfg date.sfx
</pre>

Run standalone date program with parameters:
<pre>
    $ ./date.sfx +%s
</pre>

Only extract the archive:
<pre>
    $ env SFX_EXTRACT_ONLY=1 ./date.sfx
</pre>

Run and keep extracted directory:
<pre>
    $ env SFX_KEEP=1 ./date.sfx
</pre>

Run with unique directory:
<pre>
    $ env SFX_UNIQUE=1 ./date.sfx
</pre>

Advanced example involving a complex shell command:
<pre>
    $ starch -v -x tar -x rm extract_and_remove.sfx 'for f in $@; do if ! tar xvf $f; then exit 1; fi; done; rm $@'
    $ ./extract_and_remove.sfx *.tar.gz
</pre>

<h2>COPYRIGHT</h2>

The Cooperative Computing Tools are Copyright (C) 2003-2004 Douglas Thain and Copyright (C) 2005-2011 The University of Notre Dame.  This software is distributed under the GNU General Public License.  See the file COPYING for details.

<h2>SEE ALSO</h2>

<dir>
<li> <a href="../index.html">Cooperative Computing Tools Documentation</a>
<li> <a href="../makeflow.html">Makeflow User Manual</a>
<li> <a href=makeflow.html>makeflow(1)</a>
<li> <a href=makeflow_monitor.html>makeflow_monitor(1)</a>
<li> <a href=starch.html>starch(1)</a>
</dir>

<p><hr>CCTools 3.4.2 released on 02/10/2012</body></html>


